{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="max-w-5xl mx-auto bg-white shadow-2xl rounded-2xl overflow-hidden mt-10">

    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 p-6">
        <h2 class="text-3xl font-bold text-center text-white flex items-center justify-center gap-2">
            ğŸ“ Practical Details
        </h2>
    </div>

    <!-- Practical Info -->
    <div class="p-8">
        <div class="grid md:grid-cols-2 gap-8 text-gray-800">
            <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                <p class="font-semibold text-gray-500">Practical Title</p>
                <p class="text-xl">{{ practical.title }}</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                <p class="font-semibold text-gray-500">Practical No</p>
                <p class="text-xl">{{ practical.number }}</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                <p class="font-semibold text-gray-500">Subject</p>
                <p class="text-xl">{{ practical.subject.name }} ({{ practical.subject.code }})</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-xl shadow-sm">
                <p class="font-semibold text-gray-500">Deadline</p>
                <p class="text-xl">{{ practical.deadline|date:"d M Y, h:i A" }}</p>
            </div>
        </div>

        <hr class="my-8">

        <!-- For Students -->
        {% if user.role == "student" %}
            {% if submission %}
                <div class="bg-blue-50 p-6 rounded-xl border border-blue-200 shadow-inner">
                    <h3 class="text-xl font-semibold mb-4 flex items-center gap-2 text-blue-700">ğŸ“Œ Your Submission</h3>
                    
                    <p class="flex items-center gap-2">
                        <span class="font-semibold">Status:</span>
                        <span class="px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1
                            {% if submission.status == 'approved' %} bg-green-100 text-green-700
                            {% elif submission.status == 'rejected' %} bg-red-100 text-red-700
                            {% elif submission.status == 'submitted' %} bg-yellow-100 text-yellow-700
                            {% else %} bg-gray-100 text-gray-700 {% endif %}">
                            {% if submission.status == 'approved' %} âœ…
                            {% elif submission.status == 'rejected' %} âŒ
                            {% elif submission.status == 'submitted' %} â³
                            {% else %} ğŸ“„ {% endif %}
                            {{ submission.status|title }}
                        </span>
                    </p>

                    {% if submission.feedback %}
                        <p class="mt-4 text-gray-700 bg-white p-3 rounded-lg shadow-sm">
                            <b>ğŸ’¬ Feedback:</b> {{ submission.feedback }}
                        </p>
                    {% endif %}

                    <div class="mt-6 flex gap-4">
                        <a href="{% url 'download_submission' submission.id %}" 
                           class="px-5 py-2 bg-green-600 text-white rounded-xl shadow hover:bg-green-700 transition transform hover:scale-105">
                           â¬‡ Download File
                        </a>
                    </div>
                </div>
            {% else %}
                <div class="text-center py-10">
                    <p class="mb-6 text-gray-600 text-lg">âš  You have not submitted this practical yet.</p>
                    <a href="{% url 'submit_practical' practical.id %}" 
                       class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-xl shadow hover:bg-blue-700 transition transform hover:scale-105">
                       âœ Submit Practical
                    </a>
                </div>
            {% endif %}
        {% endif %}

        <!-- For Teacher -->
        {% if user.role == "teacher" %}
            <div class="mt-10 text-center">
                <a href="{% url 'teacher_dashboard' %}" 
                   class="px-6 py-3 bg-gray-600 text-white rounded-xl shadow hover:bg-gray-700 transition transform hover:scale-105">
                   â¬… Back to Dashboard
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
