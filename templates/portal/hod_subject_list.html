{% extends 'base.html' %}

{% block content %}
<h2>HOD Subject List</h2>
<table border="1" cellpadding="10">
    <tr>
        <th>Subject Code</th>
        <th>Subject Name</th>
        <th>Assigned Teacher</th>
        <th>Action</th>
    </tr>
    {% for subject in subjects %}
    <tr>
        <td>{{ subject.code }}</td>
        <td>{{ subject.name }}</td>
<td>
    {% if subject.teacher %}
        {{ subject.teacher.username }}
    {% else %}
        Not Assigned
    {% endif %}
</td>
        <td>
            <form action="{% url 'renew_practicals' subject.id %}" method="POST">
                {% csrf_token %}
                <select name="teacher_id" required>
                    <option value="">Select Teacher</option>
                    {% for teacher in teachers %}
                        <option value="{{ teacher.id }}">{{ teacher.username }}</option>
                    {% endfor %}
                </select>
                <button type="submit" onclick="return confirm('All Practicals for this subject will be deleted. Are you sure?')">
                    Renew Practicals
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
